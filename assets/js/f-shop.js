function fs_transliteration(e){e=e.toLowerCase();for(var t={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"-","ы":"y","ь":"-","э":"e","ю":"yu","я":"ya"," ":"-",_:"-","`":"-","~":"-","!":"-","@":"-","#":"-",$:"-","%":"-","^":"-","&":"-","*":"-","(":"-",")":"-","-":"-","=":"-","+":"-","[":"-","]":"-","\\":"-","|":"-","/":"-",".":"-",",":"-","{":"-","}":"-","'":"-",'"':"-",";":"-",":":"-","?":"-","<":"-",">":"-","№":"-"},a="",r="",n=0;n<e.length;n++)void 0!=t[e[n]]?r==t[e[n]]&&"-"==r||(a+=t[e[n]],r=t[e[n]]):(a+=e[n],r=e[n]);return a=TrimStr(a)}function TrimStr(e){return(e=e.replace(/^-/,"")).replace(/-$/,"")}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function IsJsonString(e){try{JSON.parse(e)}catch(t){return console.log(e),!1}return!0}function setCookie(e,t,a){var r=(a=a||{}).expires;if("number"==typeof r&&r){var n=new Date;n.setTime(n.getTime()+1e3*r),r=a.expires=n}r&&r.toUTCString&&(a.expires=r.toUTCString());var s=e+"="+(t=encodeURIComponent(t));for(var o in a){s+="; "+o;var i=a[o];!0!==i&&(s+="="+i)}document.cookie=s}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function deleteCookie(e){setCookie(e,"",{expires:-1})}function fs_get_cart(e,t){var a={action:"fs_get_cart",template:e};jQuery.ajax({type:"POST",url:FastShopData.ajaxurl,data:a,dataType:"html",success:function(e){e&&jQuery(t).html(e)},error:function(e,t,a){console.log("error...",e)}})}var fs_message,event,FastShopLang={uk:{confirm_text:"Вы точно хочете видалити позицію «%s» із списку бажань?",wishText:"Товар успішно доданий в список бажань!",delete_text:"Вы точно хочете видалити товар «%s» із кошика?",delete_all_text:"Ви точно хочете видалити всі товари із кошика?",count_error:"к-сть товарів не може бути меньше 1"},ru_RU:{confirm_text:"Вы точно хотите удалить позицию «%s» из списка желаний?",wishText:"Товар успешно добавлен в список желаний!",delete_text:"Вы точно хотите удалить продукт «%s» из корзины?",delete_all_text:"Вы точно хотите удалить все товары из корзины?",count_error:"к-во товаров не может быть меньше единицы"}};switch(FastShopData.fs_lang){case"ru_RU":fs_message=FastShopLang.ru_RU;break;case"uk":fs_message=FastShopLang.uk;break;default:fs_message=FastShopLang.ru_RU}Array.prototype.clean=function(e){for(var t=0;t<this.length;t++)this[t]==e&&(this.splice(t,1),t--);return this};var addUrlParam=function(e,t,a){var r=t+"="+a,n="&"+r;return e&&(n=e.replace(new RegExp("([?&])"+t+"[^&]*"),"jQuery1"+r))===e&&(n+="&"+r),n};jQuery("[data-action=add-to-cart]").on("click",function(e){e.preventDefault();var t=!0;if(jQuery('[name="fs-attr"]').each(function(){if(""==jQuery(this).val()){t=!1;var e=new CustomEvent("fs_no_selected_attr");document.dispatchEvent(e)}}),!t)return t;var a=jQuery(this),r=a.data("product-id"),n=a.data("attr"),s={button:a,id:r,name:a.data("product-name"),price:a.data("price"),currency:a.data("currency"),sku:a.data("sku"),category:a.data("category"),attr:n,image:a.data("image"),success:!0,text:{success:a.data("success"),error:a.data("error")}},o={action:"add_to_cart",attr:n,post_id:r};jQuery.ajax({url:FastShopData.ajaxurl,data:o,beforeSend:function(){var e=new CustomEvent("fs_before_add_product",{detail:s});return document.dispatchEvent(e),e.success}}).done(function(e){var t=new CustomEvent("fs_add_to_cart",{detail:s});document.dispatchEvent(t)})}),document.addEventListener("fs_before_add_product",function(e){e.detail.button.find(".fs-atc-preloader").fadeIn().html('<img src="/wp-content/plugins/f-shop/assets/img/ajax-loader.gif" alt="preloader">'),e.preventDefault()},!1),document.addEventListener("fs_add_to_cart",function(e){fs_get_cart("cart-widget/widget",'[data-fs-element="cart-widget"]');var t=e.detail.button;iziToast.show({image:e.detail.image,theme:"light",title:"Успех!",message:"Товар &laquo;"+e.detail.name+"&raquo; добавлен в корзину!",position:"topCenter"}),t.find(".fs-atc-preloader").fadeOut(),setTimeout(function(){t.find(".fs-atc-info").fadeOut()},4e3),e.preventDefault()},!1),jQuery('[data-action="change-attr"]').on("change",function(){var e=jQuery(this),t=e.data("product-id"),a=jQuery("#fs-atc-"+t),r=a.data("attr"),n=a.data("variated");r.attr=[],jQuery('[name="'+e.attr("name")+'"]').each(function(e){jQuery(this).prop("checked",!1)}),e.prop("checked",!0),jQuery('[data-action="change-attr"]').each(function(e){jQuery(this).prop("checked")&&jQuery(this).val()&&(r.attr[e]=jQuery(this).val())}),r.attr.clean(void 0),n&&jQuery.ajax({type:"POST",url:FastShopData.ajaxurl,data:{action:"fs_get_variated",product_id:t,atts:r.attr},beforeSend:function(){jQuery('[data-fs-element="price"]').addClass("blink")},success:function(e){if(IsJsonString(e)){var t=jQuery.parseJSON(e),a=t.base_price+" <span>"+t.currency+"</span>";t.result?(jQuery('[data-fs-element="price"]').removeClass("blink").html(a),r.count=t.count,jQuery('[data-fs-action="change_count"]').val(t.count),jQuery('[data-fs-element="base-price"]').parent().css("visibility","hidden"),jQuery('[data-fs-element="discount"]').parent().css("visibility","hidden")):(jQuery('[data-fs-element="price"]').html(a),jQuery('[data-fs-element="base-price"]').parent().css("visibility","visible"),jQuery('[data-fs-element="discount"]').parent().css("visibility","visible"))}else console.log(e)},error:function(e,t,a){console.log("error...",e)},complete:function(){}}),jQuery("#fs-atc-"+t).attr("data-attr",JSON.stringify(r))}),jQuery('[data-fs-element="attr"]').on("change input",function(e){e.preventDefault();var t=jQuery(this).data("product-id"),a=jQuery("#fs-atc-"+t),r=a.data("attr"),n=jQuery(this).attr("name"),s=jQuery(this).val();"count"==jQuery(this).attr("name")&&(!isNumeric(s)||s<=0?(jQuery(this).val(1),s=1,jQuery(this).parent().css({position:"relative"}),jQuery(this).prev(".count-error").text(fs_message.count_error).fadeIn(400)):jQuery(this).prev(".count-error").text("").fadeOut(800),r.count=s),r.attr[n]=s;var o=JSON.stringify(r);a.attr("data-attr",o)}),jQuery('[data-fs-type="delete-cart"]').on("click",function(e){e.preventDefault(),confirm(fs_message.delete_all_text)&&(document.location.href=jQuery(this).data("url"))}),jQuery(document).on("click",'[data-fs-type="product-delete"]',function(e){e.preventDefault();var t=jQuery(this).data("fs-id"),a=jQuery(this).data("fs-name");confirm(fs_message.delete_text.replace("%s",a))&&jQuery.ajax({url:FastShopData.ajaxurl,type:"POST",dataType:"html",data:{action:"delete_product",product:t}}).done(function(){location.reload()}).fail(function(){console.log("ошибка удаления товара из корзины")}).always(function(){})}),jQuery(document).on("click",'[data-action="add-to-comparison"]',function(e){e.preventDefault();var t=jQuery(this);jQuery.ajax({url:FastShopData.ajaxurl,type:"POST",beforeSend:function(){t.find(".fs-atc-preloader").fadeIn()},data:{action:"fs_add_to_comparison",product_id:t.data("product-id"),product_name:t.data("product-name")}}).done(function(e){if(IsJsonString(e)){jQuery.parseJSON(e);t.find(".fs-atc-preloader").fadeOut(),t.find(".fs-atc-info").fadeIn().html(t.data("success")),setTimeout(function(){t.find(".fs-atc-info").fadeOut(1e3)},3e3)}})}),jQuery('[data-fs-action="quick_order_button"]').on("click",function(e){e.preventDefault();var t=jQuery(this).data("product-name"),a=jQuery(this).data("product-id");jQuery('[name="fs_cart[product_name]"]').val(t),jQuery('[name="fs_cart[product_id]"]').val(a)}),jQuery('[data-fs-action="filter"]').on("change",function(e){e.preventDefault(),"checkbox"==jQuery(this).attr("type")?jQuery(this).prop("checked")?(console.log("checked"),window.location.href=jQuery(this).val()):(window.location.href=jQuery(this).data("fs-redirect"),console.log("not-checked")):window.location.href=jQuery(this).val()}),jQuery('input[name="s"]').on("keyup input click",function(e){e.preventDefault();var t=jQuery(this),a=jQuery(this).val(),r=t.parents("form");r.css("position","relative");var n=r.find(".livesearch-wrapper");a.length>1?jQuery.ajax({url:FastShopData.ajaxurl,type:"POST",data:{action:"fs_livesearch",s:a},beforeSend:function(){t.prev().hasClass("fs-ls-preloader")?t.prev().fadeIn():t.before('<img src="/wp-content/plugins/f-shop/assets/img/blocks-preloader.svg" class="fs-ls-preloader" style="display: none;">')}}).done(function(e){e.length&&(t.next().hasClass("livesearch-wrapper")?t.next().html(e):t.after("<div class='livesearch-wrapper'>"+e+"</div>"),r.find(".fs-ls-preloader").fadeOut(),r.find(".livesearch-wrapper").fadeIn())}).always(function(){t.next().removeClass("search-animate")}):n.fadeOut().html("")}),jQuery(document).on("click",".fs-ls-close",function(e){e.preventDefault();jQuery(this).parents("form").find(".livesearch-wrapper").fadeOut().html("")}),jQuery(document).on("click","[data-fs-action='modal']",function(e){e.preventDefault();var t=jQuery(this).attr("href");jQuery(t).fadeIn()}),jQuery(document).on("click","[data-fs-action='modal-close']",function(e){e.preventDefault();var t=jQuery(this).parents(".fs-modal");jQuery(t).fadeOut()}),"undefined"!=typeof fs_lightslider_options&&jQuery("#product_slider").lightSlider(fs_lightslider_options),jQuery(document).ready(function(e){e('[data-fs-count="minus"]').on("click",function(){var t=e(e(this).data("target")),a=parseInt(t.val())-1;return a=a<1?1:a,t.val(a),t.change(),!1}),e('[data-fs-count="pluss"]').click(function(){var t=e(e(this).data("target"));return t.val(parseInt(t.val())+1),t.change(),!1}),e('[data-fs-action="change_count"]').on("change input",function(t){t.preventDefault();var a=e(this).data("fs-product-id"),r=e(this).val();r<1&&(e(this).val(1),r=1);var n=e("#fs-atc-"+a),s=n.data("attr");s.count=r,n.attr("data-attr",JSON.stringify(s));var o=new CustomEvent("fs_change_count",{detail:{count:r}});document.dispatchEvent(o)})}),jQuery(document).ready(function(e){e('[data-fs-type="cart-quantity"]').on("change input",function(t){t.preventDefault();var a=e(this).data("product-id"),r=e(this).val();!isNumeric(r)||r<=0?(e(this).val(1),r=1,e(this).parent().css({position:"relative"}),e(this).prev(".count-error").text(fs_message.count_error).fadeIn(400)):e(this).prev(".count-error").text("").fadeOut(800),e.ajax({url:FastShopData.ajaxurl,type:"POST",data:{action:"update_cart",product:a,count:r}}).done(function(){location.reload()})})});var u=new Url,p_start=void 0==u.query.price_start?0:u.query.price_start,p_end=void 0==u.query.price_end?FastShopData.fs_slider_max:u.query.price_end;jQuery('[data-fs-element="range-slider"]').slider({range:!0,min:0,max:FastShopData.fs_slider_max,values:[p_start,p_end],slide:function(e,t){jQuery('[data-fs-element="range-end"] ').html("<span>"+t.values[1]+"</span> "+FastShopData.fs_currency),jQuery('[data-fs-element="range-start"] ').html(t.values[0]+" "+FastShopData.fs_currency),jQuery("#slider-range > .ui-slider-handle:nth-child(2)").html('<span><span class="val">'+t.values[0]+"</span>&nbsp;"+FastShopData.fs_currency+"</span>"),jQuery("#slider-range > .ui-slider-handle:nth-child(3)").html('<span><span class="val">'+t.values[1]+"</span>&nbsp;"+FastShopData.fs_currency+"</span>"),jQuery('[data-fs-element="range-start-input"]').val(t.values[0]),jQuery('[data-fs-element="range-end-input"]').val(t.values[1])},change:function(e,t){u.query.fs_filter=FastShopData.fs_nonce,u.query.price_start=t.values[0],u.query.price_end=t.values[1],window.location.href=u.toString()}}),jQuery('[data-fs-element="range-end"] ').html(p_end+" "+FastShopData.fs_currency),jQuery('[data-fs-element="range-start"] ').html(p_start+" "+FastShopData.fs_currency),jQuery('[data-fs-element="range-start-input"]').val(p_start),jQuery('[data-fs-element="range-end-input"]').val(p_end),jQuery("#slider-range > .ui-slider-handle:nth-child(2)").html('<span><span class="val">'+p_start+"</span>&nbsp;"+FastShopData.fs_currency+"</span>"),jQuery("#slider-range > .ui-slider-handle:nth-child(3)").html('<span><span class="val">'+p_end+"</span>&nbsp;"+FastShopData.fs_currency+"</span>"),jQuery("#minPrice .val").html(p_start+" "+FastShopData.fs_currency),jQuery("#maxPrice .val").html(p_end+" "+FastShopData.fs_currency);var userInfoEdit=jQuery('form[name="fs-profile-edit"]');userInfoEdit.validate({rules:{"fs-password":{minlength:6},"fs-repassword":{equalTo:"#fs-password"}},messages:{"fs-repassword":{equalTo:"пароль и повтор пароля не совпадают"},"fs-password":{minlength:"минимальная длина 6 символов"}},submitHandler:function(e){jQuery.ajax({url:FastShopData.ajaxurl,type:"POST",data:userInfoEdit.serialize(),beforeSend:function(){userInfoEdit.find(".fs-form-info").fadeOut().removeClass("fs-error fs-success").html(),userInfoEdit.find('[data-fs-element="submit"]').html('<img src="/wp-content/plugins/f-shop/assets/img/ajax-loader.gif">')}}).done(function(e){userInfoEdit.find('[data-fs-element="submit"]').html("Сохранить");var t=JSON.parse(e);0==t.status?userInfoEdit.find(".fs-form-info").addClass("fs-error").fadeIn().html(t.message):userInfoEdit.find(".fs-form-info").addClass("fs-success").fadeIn().html(t.message),setTimeout(function(){userInfoEdit.find(".fs-form-info").fadeOut("slow").removeClass("fs-error fs-success").html()},5e3)})}});var userProfileCreate=jQuery('form[name="fs-profile-create"]');userProfileCreate.validate({rules:{"fs-password":{minlength:6},"fs-repassword":{equalTo:"#fs-password"}},messages:{"fs-repassword":{equalTo:"пароль и повтор пароля не совпадают"},"fs-password":{minlength:"минимальная длина 6 символов"}},submitHandler:function(e){jQuery.ajax({url:FastShopData.ajaxurl,type:"POST",data:userProfileCreate.serialize(),beforeSend:function(){userProfileCreate.find(".form-info").html("").fadeOut(),userProfileCreate.find(".fs-preloader").fadeIn()}}).done(function(e){userProfileCreate.find(".fs-preloader").fadeOut();var t=JSON.parse(e);1==t.status?(userProfileCreate.find(".form-info").removeClass("bg-danger").addClass("bg-success").fadeIn().html(t.message),userProfileCreate.find("input").each(function(){"hidden"!=jQuery(this).attr("type")&&jQuery(this).val("")})):userProfileCreate.find(".form-info").removeClass("bg-success").addClass("bg-danger").fadeIn().html(t.message)})}});var loginForm=jQuery('form[name="fs-login"]');loginForm.validate({submitHandler:function(e){jQuery.ajax({url:FastShopData.ajaxurl,type:"POST",data:loginForm.serialize(),beforeSend:function(){loginForm.find(".form-info").fadeOut().removeClass("bg-danger").html(""),loginForm.find(".fs-preloader").fadeIn()}}).done(function(e){var t=JSON.parse(e);console.log(t),loginForm.find(".fs-preloader").fadeOut(),0==t.status?loginForm.find(".fs-form-info").addClass("bg-danger").fadeIn().html(t.error):0==t.redirect?location.reload():location.href=t.redirect})}});var validator=jQuery('[name="fs-order-send"]');jQuery('[data-fs-action="order-send"]').click(function(e){e.preventDefault(),validator.submit()}),validator.validate({ignore:[],submitHandler:function(e){jQuery.ajax({url:FastShopData.ajaxurl,type:"POST",data:validator.serialize(),beforeSend:function(){jQuery('[data-fs-action="order-send"]').html('<img src="/wp-content/plugins/f-shop/assets/img/ajax-loader.gif" alt="preloader">')}}).done(function(e){if(jQuery("button[data-fs-action=order-send]").find(".fs-preloader").fadeOut("slow"),!IsJsonString(e))return!1;var t=JSON.parse(e);if(t.success){var a=new CustomEvent("fs_send_order",{detail:{order_id:t.order_id,sum:t.sum}});document.dispatchEvent(a),jQuery('[data-fs-action="order-send"]').html("Отправлено"),0!=t.redirect&&(document.location.href=t.redirect)}else"undefined"!=t.error_code&&console.log(t.error_code),jQuery('[name="fs-order-send"] .fs-form-info').addClass("error").html(t.text).fadeIn(),jQuery('[data-fs-action="order-send"]').html("Отправить")})}}),jQuery('[data-fs-action="wishlist"]').on("click",function(e){e.preventDefault();var t=jQuery(this).data("product-id"),a=jQuery(this).data("name"),r=jQuery(this);jQuery.ajax({url:FastShopData.ajaxurl,data:{action:"fs_addto_wishlist",product_id:t},beforeSend:function(){var e=new CustomEvent("fs_before_to_wishlist",{detail:{id:t,image:r.data("image"),name:a,button:r}});document.dispatchEvent(e)}}).done(function(e){var n=jQuery.parseJSON(e);jQuery('[data-fs-element="whishlist-widget"]').html(n.body);var s=new CustomEvent("fs_add_to_wishlist",{detail:{id:t,name:a,button:r,image:r.data("image"),ajax_data:n}});document.dispatchEvent(s)})}),jQuery('[data-fs-action="wishlist-delete-position"]').on("click",function(e){var t=jQuery(this).data("product-id"),a=jQuery(this).data("product-name");jQuery(this).parents("li");confirm(fs_message.confirm_text.replace("%s",a))&&jQuery.ajax({url:FastShopData.ajaxurl,data:{action:"fs_del_wishlist_pos",position:t}}).done(function(e){var t=jQuery.parseJSON(e);jQuery("#fs-wishlist").html(t.body)})}),document.addEventListener("fs_before_to_wishlist",function(e){e.detail.button.find(".fs-wh-preloader").fadeIn().html('<img src="/wp-content/plugins/f-shop/assets/img/ajax-loader.gif" alt="preloader">'),e.preventDefault()},!1),document.addEventListener("fs_add_to_wishlist",function(e){e.detail.button.find(".fs-wh-preloader").fadeOut(),iziToast.show({image:e.detail.image,theme:"light",title:"Успех!",message:"Товар &laquo;"+e.detail.name+"&raquo; добавлен в список желаний!",position:"topCenter"}),e.preventDefault()},!1);