function fs_transliteration(t){t=t.toLowerCase();for(var e={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"-","ы":"y","ь":"-","э":"e","ю":"yu","я":"ya"," ":"-",_:"-","`":"-","~":"-","!":"-","@":"-","#":"-",$:"-","%":"-","^":"-","&":"-","*":"-","(":"-",")":"-","-":"-","=":"-","+":"-","[":"-","]":"-","\\":"-","|":"-","/":"-",".":"-",",":"-","{":"-","}":"-","'":"-",'"':"-",";":"-",":":"-","?":"-","<":"-",">":"-","№":"-"},a="",r="",n=0;n<t.length;n++)void 0!=e[t[n]]?r==e[t[n]]&&"-"==r||(a+=e[t[n]],r=e[t[n]]):(a+=t[n],r=t[n]);return a=TrimStr(a)}function TrimStr(t){return(t=t.replace(/^-/,"")).replace(/-$/,"")}function isNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}function IsJsonString(t){try{JSON.parse(t)}catch(e){return console.log(t),!1}return!0}jQuery(document).on("click","[data-fs-action='modal']",function(t){t.preventDefault();var e=jQuery(this).attr("href");jQuery(e).fadeIn()}),jQuery(document).on("click","[data-fs-action='modal-close']",function(t){t.preventDefault();var e=jQuery(this).parents(".fs-modal");jQuery(e).fadeOut()}),jQuery('[data-action="change-attr"]').on("change",function(){jQuery(this);var t=jQuery(this).data("target"),e=jQuery(this).data("product-id"),a=jQuery("#fs-atc-"+e).data("attr"),r=jQuery(this).attr("name");jQuery(t).val(jQuery(this).val()),a.attr=[],jQuery('[name="'+r+'"]').each(function(t){jQuery(this).prop("checked",!1)}),jQuery(this).prop("checked",!0),jQuery('[data-action="change-attr"]').each(function(t){jQuery(this).prop("checked")&&jQuery(this).val()&&(a.attr[t]=jQuery(this).val())}),Array.prototype.clean=function(t){for(var e=0;e<this.length;e++)this[e]==t&&(this.splice(e,1),e--);return this},a.attr.clean(void 0),jQuery("#fs-atc-"+e).attr("data-attr",JSON.stringify(a))}),jQuery("[data-action=add-to-cart]").on("click",function(t){t.preventDefault();var e=!0;if(jQuery('[name="fs-attr"]').each(function(){if(""==jQuery(this).val()){e=!1;var t=new CustomEvent("fs_no_selected_attr");document.dispatchEvent(t)}}),!e)return e;var a=jQuery(this),r=a.data("product-id"),n=a.data("attr"),o={button:a,id:r,name:a.data("product-name"),attr:n,image:a.data("image"),success:!0,text:{success:a.data("success"),error:a.data("error")}},i={action:"add_to_cart",attr:n,post_id:r};jQuery.ajax({url:FastShopData.ajaxurl,data:i,beforeSend:function(){var t=new CustomEvent("fs_before_add_product",{detail:o});return document.dispatchEvent(t),t.success}}).done(function(t){var e=new CustomEvent("fs_add_to_cart",{detail:o});document.dispatchEvent(e)})}),jQuery('[data-fs-action="wishlist"]').on("click",function(t){t.preventDefault();var e=jQuery(this).data("product-id"),a=jQuery(this).data("name"),r=jQuery(this);jQuery.ajax({url:FastShopData.ajaxurl,data:{action:"fs_addto_wishlist",product_id:e},beforeSend:function(){var t=new CustomEvent("fs_before_to_wishlist",{detail:{id:e,image:r.data("image"),name:a,button:r}});document.dispatchEvent(t)}}).done(function(t){var n=jQuery.parseJSON(t),o=new CustomEvent("fs_add_to_wishlist",{detail:{id:e,name:a,button:r,image:r.data("image"),ajax_data:n}});document.dispatchEvent(o)})});var validator=jQuery('[name="fs-order-send"]');jQuery('[data-fs-action="order-send"]').click(function(t){t.preventDefault(),validator.submit()}),validator.validate({ignore:[],submitHandler:function(t){jQuery.ajax({url:FastShopData.ajaxurl,type:"POST",data:validator.serialize(),beforeSend:function(){jQuery('[data-fs-action="order-send"]').html('<img src="/wp-content/plugins/f-shop/assets/img/ajax-loader.gif" alt="preloader">')}}).done(function(t){if(jQuery("button[data-fs-action=order-send]").find(".fs-preloader").fadeOut("slow"),!IsJsonString(t))return!1;var e=JSON.parse(t);if(e.success){var a=new CustomEvent("fs_send_order",{detail:{order_id:e.order_id,sum:e.sum}});document.dispatchEvent(a),jQuery('[data-fs-action="order-send"]').html("Отправлено"),0!=e.redirect&&(document.location.href=e.redirect)}else"undefined"!=e.error_code&&console.log(e.error_code),jQuery('[name="fs-order-send"] .fs-form-info').addClass("error").html(e.text).fadeIn(),jQuery('[data-fs-action="order-send"]').html("Отправить")})}});